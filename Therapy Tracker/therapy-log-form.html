<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emotional Registry Entry Form</title>
  <style>
    :root {
      --bg-color: #ffffff;
      --text-color: #333333;
      --input-bg: #f5f5f5;
      --border-color: #cccccc;
      --accent-color: #4a90e2;
      --valid-color: #2ecc71;
      --invalid-color: #e74c3c;
    }
    
    .dark-mode {
      --bg-color: #222222;
      --text-color: #f5f5f5;
      --input-bg: #333333;
      --border-color: #555555;
      --accent-color: #5a9aea;
      --valid-color: #2ecc71;
      --invalid-color: #e74c3c;
    }
    
    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      transition: all 0.3s ease;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
    }
  </style>
</head>
<body>
  <form id="therapy-log">
    <style>
      #therapy-log {
        max-width: 600px;
        margin: 20px auto;
        padding: 25px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        background-color: var(--bg-color);
      }
      
      .form-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }
      
      .form-title {
        font-size: 24px;
        font-weight: 600;
        color: var(--accent-color);
      }
      
      .theme-btn {
        background-color: var(--accent-color);
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.2s ease;
      }
      
      .theme-btn:hover {
        opacity: 0.9;
      }
      
      form div {
        margin-bottom: 20px;
        display: flex;
        align-items: flex-start;
      }
      
      label {
        display: inline-block;
        width: 200px;
        margin-right: 15px;
        font-weight: 500;
      }
      
      input, select, textarea {
        padding: 10px;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        background-color: var(--input-bg);
        color: var(--text-color);
        font-family: inherit;
        transition: all 0.2s ease;
      }
      
      input:focus, select:focus, textarea:focus {
        outline: none;
        border-color: var(--accent-color);
        box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2);
      }
      
      input:invalid + span::after {
        content: "✖";
        padding-left: 8px;
        color: var(--invalid-color);
      }
      
      input:valid + span::after {
        content: "✓";
        padding-left: 8px;
        color: var(--valid-color);
      }
      
      textarea {
        width: 300px;
        resize: vertical;
      }
      
      select[multiple] {
        height: auto;
        min-height: 450px; /* Increased further to eliminate scrollbar */
        width: 300px;
        resize: none;
        overflow: hidden; /* Hide scrollbar */
      }
      
      button[type="submit"] {
        background-color: var(--accent-color);
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 500;
        margin-top: 10px;
        transition: all 0.2s ease;
      }
      
      button[type="submit"]:hover {
        opacity: 0.9;
      }
    </style>

    <div class="form-header">
      <h2 class="form-title">Emotional Registry Entry</h2>
      <div class="header-controls">
        <button type="button" id="view-tracker" class="secondary-btn">View Registry</button>
        <button type="button" id="theme-toggle" class="theme-btn">🌙 Dark Mode</button>
      </div>
    </div>

    <style>
      .header-controls {
        display: flex;
        gap: 10px;
      }
      
      .secondary-btn {
        background-color: transparent;
        color: var(--accent-color);
        border: 1px solid var(--accent-color);
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.2s ease;
      }
      
      .secondary-btn:hover {
        background-color: rgba(74, 144, 226, 0.1);
      }
    </style>

    <div>
      <label for="event-date">Date of event:</label>
      <input type="date" id="event-date" name="eventDate" required>
      <span></span>
    </div>

    <div>
      <label for="event-time">Time of day:</label>
      <input type="time" id="event-time" name="eventTime">
      <span></span>
    </div>

    <div>
      <label for="event-duration">Duration:</label>
      <input type="number" id="event-duration" name="eventDuration" min="1" placeholder="Minutes">
      <span></span>
    </div>
    
    <div>
      <label for="event-title">Event title:</label>
      <input type="text" id="event-title" name="eventTitle" required>
      <span></span>
    </div>
    
    <div>
      <label for="emotions">Emotions felt:</label>
      <select id="emotions" name="emotions" multiple>
        <option value="anger">😠 Anger</option>
        <option value="anxiety">😰 Anxiety</option>
        <option value="sadness">😢 Sadness</option>
        <option value="fear">😨 Fear</option>
        <option value="joy">😊 Joy</option>
        <option value="shame">😳 Shame</option>
        <option value="guilt">😔 Guilt</option>
        <option value="overwhelmed">😫 Overwhelmed</option>
        <option value="frustrated">😤 Frustrated</option>
        <option value="hopeful">🌱 Hopeful</option>
        <option value="grateful">🙏 Grateful</option>
        <option value="proud">🏆 Proud</option>
        <option value="confused">😕 Confused</option>
        <option value="lonely">🥺 Lonely</option>
        <option value="peaceful">😌 Peaceful</option>
        <option value="excited">🤩 Excited</option>
        <option value="disappointed">😞 Disappointed</option>
        <option value="embarrassed">🫣 Embarrassed</option>
        <option value="jealous">😒 Jealous</option>
        <option value="content">😌 Content</option>
      </select>
    </div>

    <!-- Remove the emotion-strategies div -->

    <div>
      <label for="intensity">Intensity (1-10):</label>
      <input type="range" id="intensity" name="intensity" min="1" max="10" value="5">
      <output for="intensity">5</output>
    </div>

    <div>
      <label for="triggers">Triggers/Antecedents:</label>
      <textarea id="triggers" name="triggers" rows="2" placeholder="What happened right before you felt this way?"></textarea>
    </div>

    <div>
      <label for="event-details">What happened:</label>
      <textarea id="event-details" name="eventDetails" rows="5" required></textarea>
      <span></span>
    </div>

    <div>
      <label for="thoughts">Thoughts during the event:</label>
      <textarea id="thoughts" name="thoughts" rows="3" placeholder="What went through your mind?"></textarea>
    </div>

    <div>
      <label for="physical-sensations">Physical sensations:</label>
      <textarea id="physical-sensations" name="physicalSensations" rows="2" placeholder="How did your body feel?"></textarea>
    </div>

    <div>
      <label for="coping">Coping strategies used:</label>
      <textarea id="coping" name="coping" rows="2" placeholder="What did you do to cope with these feelings?"></textarea>
    </div>

    <style>
      .strategies-container {
        margin-left: 215px;
        margin-bottom: 20px;
        max-width: 300px;
      }
      
      .strategy-card {
        background-color: rgba(74, 144, 226, 0.1);
        border-left: 3px solid var(--accent-color);
        padding: 10px 15px;
        margin-bottom: 10px;
        border-radius: 0 4px 4px 0;
      }
      
      .strategy-title {
        font-weight: 600;
        margin-bottom: 5px;
        display: flex;
        align-items: center;
      }
      
      .strategy-title .emotion-icon {
        margin-right: 8px;
      }
      
      .strategy-tips {
        font-size: 14px;
        line-height: 1.4;
      }
      
      input[type="range"] {
        width: 200px;
        margin-right: 10px;
      }
      
      output {
        font-weight: bold;
      }
    </style>

    <button type="submit">Save Event</button>
  </form>

  <script>
    // Intensity slider
    const intensitySlider = document.getElementById('intensity');
    const intensityOutput = intensitySlider.nextElementSibling;

    intensitySlider.addEventListener('input', function() {
      intensityOutput.textContent = this.value;
    });

    // Set max date to today
    document.addEventListener('DOMContentLoaded', function() {
      const dateInput = document.getElementById('event-date');
      const today = new Date().toISOString().split('T')[0];
      dateInput.setAttribute('max', today);
    });

    // Form submission handler
    document.getElementById('therapy-log').addEventListener('submit', function(event) {
      event.preventDefault();
      
      // Collect form data
      const formData = new FormData(this);
      const formEntries = Object.fromEntries(formData.entries());
      
      // Handle multiple select values
      formEntries.emotions = formData.getAll('emotions');
      formEntries.id = Date.now(); // Add unique ID based on timestamp
      
      // Save to localStorage
      saveEvent(formEntries);
      
      // Redirect to tracker log page
      window.location.href = 'therapy-tracker.html';
    });
    
    // Save event to localStorage
    function saveEvent(eventData) {
      // Get existing events or initialize empty array
      const existingEvents = JSON.parse(localStorage.getItem('therapyEvents') || '[]');
      
      // Add new event
      existingEvents.push(eventData);
      
      // Save back to localStorage
      localStorage.setItem('therapyEvents', JSON.stringify(existingEvents));
    }
    
    // Dark mode toggle - simplified approach
    const themeToggle = document.getElementById('theme-toggle');
    
    // Function to update theme
    function updateTheme(isDark) {
      if (isDark) {
        document.body.classList.add('dark-mode');
        themeToggle.textContent = '☀️ Light Mode';
      } else {
        document.body.classList.remove('dark-mode');
        themeToggle.textContent = '🌙 Dark Mode';
      }
      // Save preference
      localStorage.setItem('darkMode', isDark);
    }
    
    // Toggle button click handler
    themeToggle.addEventListener('click', function() {
      const isDarkMode = !document.body.classList.contains('dark-mode');
      updateTheme(isDarkMode);
    });
    
    // Apply saved theme on load
    document.addEventListener('DOMContentLoaded', function() {
      const savedDarkMode = localStorage.getItem('darkMode') === 'true';
      updateTheme(savedDarkMode);
    });

    // View tracker button
    document.getElementById('view-tracker').addEventListener('click', function() {
      window.location.href = 'therapy-tracker.html';
    });
  </script>
</body>
</html>


















